<!doctype html>
<html lang="en">

<!-- http://www.codeshare.io/WTfIp -->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-C/home/tunc/Desktop/visualization/week2ompatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>D3 via Console</title>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
</head>

<body align="center">
<script>

// python2.7 -m SimpleHTTPServer

// define some colors
var colors = {
    "grey":   "#bbbbbb",
    "blue":   "#377eb8",
    "purple": "#984ea3",
    "green":  "#4daf4a",
    "orange": "#ff7f00"
};

// define a couple of variables
var x = 0;
var y = 0;

// this will add an SVG (scalable vector graphic - like a gif) to the body
// SVG is an html element
var svg = d3.select("body").append("svg");

// give our SVG some attributes like width and height
// notice that these are, by default, pixels
// if you want to be explicit, then going to need to work around them because they'll turn into strings
svg.attr("width", 300);
svg.attr("height", 200);

// give our SVG some style (stuff like color, etc)
svg.style("background-color", colors.green);

// create a box object
var box = svg.append("rect");

// give it some width and height attributes
box.attr("width", 100);
box.attr("height", 50);

// try moving it in the corner; think about why these are the correct x, y values
x = svg.attr("width") - box.attr("width")
y = svg.attr("height") - box.attr("height")

// place the box at certain locations
// play around with 0-300 and 0-200 and thinking about how we start in the top-left corner
box.attr("x", x);
box.attr("y", y);

// because we're within SVG thing, command is not background, but fill
box.style("fill", colors.orange);

// move the box to the middle - need it to be perfectly centered
x = svg.attr("width") / 2.0 - box.attr("width") / 2.0
y = svg.attr("height") / 2.0 - box.attr("height") / 2.0
// box.attr("x", x);
// box.attr("y", y);

// another thing can do, actually animates the damn thing!
// box.transition()
// 	.attr("x", x)
// 	.attr("y", y);

// mess around with the duration that the entire transition takes
// ease things can also make things much more fun
// box.transition()
// 	.duration(2000)
// 	.ease("bounce")
// 	.attr("x", 0)
// 	.attr("y", 0);

// creating a group, so can mess around with lots of objects at once
var r = 20;
var group = svg.append("g");
var dot = group.append("circle");

// use this group attribute thing to tranform entire group things
// eg. because we usually have a margin within an SVG
// eg. create a plot group and translate over and down a little bit
group.attr("transform", "translate(" + x + "," + y + ")");

// defining the center point by radius, etc.
// x = 0 + r;
// y = 0 + r;

// point you specify for a dot is the center point, draws radius around it
dot.attr("r", 20);
dot.attr("cx", 0);
dot.attr("cy", 0);
dot.style("fill", colors.blue);

// mouseover
dot.on("mouseover", function() {
	d3.select(this) // select this element
		.transition() // take transition to change color
		.duration(100) // slow change
		.style("fill", colors.purple)
});

// mouseout
dot.on("mouseout", function() {
	d3.select(this) // select this element
		.transition() // take transition to change color
		.duration(100) // slow change
		.style("fill", colors.blue)
});

// want to be able to drag things around
// create a function first
var drag = d3.behavior.drag();

// drag on
drag = drag.on("dragstart", function() {
	d3.select(this).style("fill", colors.grey)
});

// drag off
drag = drag.on("dragend", function() {
	d3.select(this).style("fill", colors.blue)
});

// NOTE: lots of coordinate systems going on here!!!
// for us moving things, all we need to do is look at the change in x's and y's
drag = drag.on("drag", function() {

	var old = {

		// need for this to be numbers, so add this (+) shit
		"x": +d3.select(this).attr("cx"),
		"y": +d3.select(this).attr("cy")
	};

	// what is happening here?
	d3.select(this).attr("cx", old.x + d3.event.dx);
	d3.select(this).attr("cy", old.y + d3.event.dy);

});

// call on this function; where? in the box
dot.call(drag);


// how to bind data to d3 elements!!!




</script>
</body>
</html>








