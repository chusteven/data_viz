<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>MSAN 622 Information Visualization</title>

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/bootstrap-theme.min.css" rel="stylesheet">

<style type="text/css">
    body {
        padding-top: 50px;
        padding-bottom: 20px;
    }
</style>


</head>

<body>

<!-- this is defining the style for the objects we will have populating our page -->
<style>

/* for parallel plots */
svg#pp {
  font: 12px sans-serif;
}

svg#pp .background path {
  fill: none;
  stroke: none;
  stroke-width: 20px;
  pointer-events: stroke;
}

svg#pp .foreground path {
  fill: none;
  stroke: steelblue;
  stroke-width: 1.5px;
}

svg#pp .axis .title {
  font-size: 11px;
  font-weight: bold;
  text-transform: uppercase;
}

svg#pp .axis line, .axis path {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

svg#pp .axis.string {
  font-size: 6px;
}

svg#pp .label {
  -webkit-transition: fill 125ms linear;
}

svg#pp .active .label:not(.inactive) {
  font-weight: bold;
  font-size: 11px;
}

svg#pp .label.inactive {
  fill: #ccc;
}

svg#pp .foreground path.inactive {
  stroke: #ccc;
  stroke-opacity: .5;
  stroke-width: 1px;
}

</style>

<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle Navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">MSN 622</a>
        </div>

        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="#homework">Homework</a></li>
                <li><a href="#project">Project</a></li>
                <li><a href="#participation">Participation</a></li>
            </ul>

            <ul class="nav navbar-nav navbar-right">
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="container">

    <!-- title for homework -->
    <div class="row" style="text-align:center;">
        <h1>Final Project Prototype</h1>
        <p>This page is for Steven Chu's final project prototype. Source code can be found in my <a href="https://github.com/chusteven/spring-2015-msan622/blob/gh-pages/projprototype.html">github respository</a>.</p>
    </div>

</div>

<div class="container">

    <div class="row">

        <div class="media-body" id="userguide">

            <h2 class="page-header">A Brief User Guide</h2>

            <p>A user guide for interactivity here (when it happens).</p>

        </div>

    </div>

</div>

<div class="container">

    <div class="row">

        <div class="media-body" id="plots"></div>

            <h2 class="page-header">Prototype</h2>

            <script type='text/javascript' src='https://public.tableau.com/javascripts/api/viz_v1.js'></script><div class='tableauPlaceholder' style='width: 654px; height: 742px;'><noscript><a href='#'><img alt='Dashboard 1 ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;pr&#47;prototypes&#47;Dashboard1&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz' width='654' height='742' style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='site_root' value='' /><param name='name' value='prototypes&#47;Dashboard1' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;pr&#47;prototypes&#47;Dashboard1&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='showVizHome' value='no' /><param name='showTabs' value='y' /><param name='bootstrapWhenNotified' value='true' /></object></div>

        </div>

    </div>

</div>

<div class="container">

    <div class="row">

        <div class="media-body" id="preprocessing">
            
            <h2 class="page-header">Pre-Processing</h1>

            <p>Pre-processing here.</p>

        </div>

    </div>

    <div class="row">

        <div class="media-body" id="discussion">
            
            <h2 class="page-header">Discussion</h1>

            <p>Some kind of discussion over here.</p>

        </div>

    </div>

</div>


<footer>
    <p style="text-align: center;">Steven Chu &bullet; MSAN 622 Information Visualization &bullet; Spring 2015</p>
</footer>

</div>

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/d3.min.js"></script>

<script>

    // for A, plot parallel coordinates
    // http://bl.ocks.org/syntagmatic/4020926
    // code from http://bl.ocks.org/syntagmatic/4020926

    // defining margins for this particular graph
    var parallelMargin = {top: 30, right: 40, bottom: 20, left: 100},
        parallelWidth = 1000 - parallelMargin.left - parallelMargin.right,
        parallelHeight = 600 - parallelMargin.top - parallelMargin.bottom;

    // define dimensions that i want to plot
    var dimensions = [
      {
        name: "AGE2",
        // scale: d3.scale.ordinal().rangePoints([0, parallelHeight]),
        // type: "string"
        scale: d3.scale.linear().range([parallelHeight, 0]),
        type: "number"
      },
      {
        name: "avgNervous",
        scale: d3.scale.linear().range([parallelHeight, 0]),
        type: "number"
      },
      {
        name: "avgHopeless",
        scale: d3.scale.linear().range([parallelHeight, 0]),
        type: "number"
      },
      {
        name: "avgRestless",
        scale: d3.scale.linear().range([parallelHeight, 0]),
        type: "number"
      },
      {
        name: "avgSad",
        scale: d3.scale.linear().range([parallelHeight, 0]),
        type: "number"
      },
      {
        name: "avgEffort",
        scale: d3.scale.linear().range([parallelHeight, 0]),
        type: "number"
      },
      {
        name: "avgWorthless",
        scale: d3.scale.linear().range([parallelHeight, 0]),
        type: "number"
      }
    ];

    // defining x axis object
    var xScaleParallel = d3.scale.ordinal()
        .domain(dimensions.map(function(d) { return d.name; }))
        .rangePoints([0, parallelWidth]);

    // creating line function (?)
    var line = d3.svg.line()
        .defined(function(d) { return !isNaN(d[1]); });

    // creating new y axis of sorts - want to know how exactly this interfaces with everything else
    var yAxis2 = d3.svg.axis()
        .orient("left");

    // creating the parallel axes plot
    var parallelChart = d3.select("#plots").append("svg")
        .attr("id", "pp")
        .attr("width", parallelWidth + parallelMargin.left + parallelMargin.right)
        .attr("height", parallelHeight + parallelMargin.top + parallelMargin.bottom)
      .append("g")
        .attr("transform", "translate(" + parallelMargin.left + "," + parallelMargin.top + ")");

    // doing something about the dimensions
    var dimension = parallelChart.selectAll(".dimension")
        .data(dimensions)
      .enter().append("g")
        .attr("class", "dimension")
        .attr("transform", function(d) { return "translate(" + xScaleParallel(d.name) + ")"; });

    // actually reading in the data
    d3.csv("question2.csv", function(data) {
      dimensions.forEach(function(dimension) {
        dimension.scale.domain(
          (dimension.type === "number" && dimension.name === "AGE2")
            ? [7,17]
            : [1,5]
            // data.map(function(d) { return d[dimension.name]; }).sort()
            );
      });

      // what's going on here?
      parallelChart.append("g")
          .attr("class", "background")
        .selectAll("path")
          .data(data)
        .enter().append("path")
          .attr("d", draw);

      // and here?
      parallelChart.append("g")
          .attr("class", "foreground")
        .selectAll("path")
          .data(data)
        .enter().append("path")
          .attr("d", draw);

      // and here?
      dimension.append("g")
          .attr("class", "axis")
          .each(function(d) { d3.select(this).call(yAxis2.scale(d.scale)); })
        .append("text")
          .attr("class", "title")
          .attr("text-anchor", "middle")
          .attr("y", -9)
          .text(function(d) { return d.name; });

      // what is happening here? something about the ordinal labels?
      var ordinal_labels = parallelChart.selectAll(".axis text")
          .on("mouseover", mouseover)
          .on("mouseout", mouseout);

      // some kind of projection thing going on now
      var projection = parallelChart.selectAll(".background path,.foreground path")
          .on("mouseover", mouseover)
          .on("mouseout", mouseout);

      // moseover function
      function mouseover(d) {
        parallelChart.classed("active", true);

        // this could be more elegant (?)
        if (typeof d === "string") {
          projection.classed("inactive", function(p) { return p.name !== d; });
          projection.filter(function(p) { return p.name === d; }).each(moveToFront);
          ordinal_labels.classed("inactive", function(p) { return p !== d; });
          ordinal_labels.filter(function(p) { return p === d; }).each(moveToFront);
        } else {
          projection.classed("inactive", function(p) { return p !== d; });
          projection.filter(function(p) { return p === d; }).each(moveToFront);
          ordinal_labels.classed("inactive", function(p) { return p !== d.name; });
          ordinal_labels.filter(function(p) { return p === d.name; }).each(moveToFront);
        }
      }

      // mouseout function
      function mouseout(d) {
        parallelChart.classed("active", false);
        projection.classed("inactive", false);
        ordinal_labels.classed("inactive", false);
      }

      // what's going on here?
      function moveToFront() {
        this.parentNode.appendChild(this);
      }
    });

    // and here?
    function draw(d) {
      return line(dimensions.map(function(dimension) {
        return [xScaleParallel(dimension.name), dimension.scale(d[dimension.name])];
      }));
    }

</script>